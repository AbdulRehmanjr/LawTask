<section class="container margin">
  <div class="row">
    <div class="col-sm-4">
      <h3>Search</h3>
      <form [formGroup]="search" class="row asmr-form" (ngSubmit)="onSubmit()">
        <span class="d-flex flex-column">
          <input
            type="text"
            placeholder="Jobs"
            formControlName="job"
            class="asmr-input"
          />
        </span>
        <button class="mx-auto mt-2 btn btn-success asmr-button">Search</button>
      </form>
    </div>
    <ng-container *ngIf="isFound; else notFound">
      <div class="col-sm-12">
        <h3 class="page-title">Search Results</h3>

        <!-- Tasks Container -->
        <div class="tasks-list-container tasks-grid-layout margin-top-35">
          <!-- Task -->
          <a
            *ngFor="let job of jobs?.slice(first, first + rows)"
            class="task-listing col-sm-12 col-md-3"
          >
            <!-- Job Listing Details -->
            <div class="task-listing-details">
              <div class="task-listing-description">
                <img
                  width="70"
                  src="data:image/jpeg; base64, {{ job?.jobImage }}"
                  alt="job image"
                />
                <h3 class="task-listing-title">{{ job.jobName }}</h3>
              </div>
            </div>

            <div class="task-listing-bid">
              <div class="task-listing-bid-inner">
                <div class="task-offers">
                  <strong>{{ job?.jobPrice | currency : "USD" }}</strong>
                  <strong>{{ job?.user.userName }}</strong>
                  <span>Fixed Price</span>
                </div>
                <span
                  (click)="sendMessage(job.user.userId)"
                  class="button button-sliding-icon ripple-effect"
                  >Contact <i class="fa-regular fa-comment-dots"></i
                ></span>
              </div>
            </div>
          </a>
        </div>
        <!-- Tasks Container / End -->

        <!-- Pagination -->
        <div class="clearfix"></div>
        <div class="row">
          <div class="col-md-12">
            <p-paginator
              (onPageChange)="onPageChange($event)"
              [first]="first"
              [rows]="rows"
              [totalRecords]="jobs?.length"
            ></p-paginator>
          </div>
        </div>
      </div>
    </ng-container>
    <ng-template #notFound>
      <app-notfound></app-notfound>
    </ng-template>
  </div>
</section>
